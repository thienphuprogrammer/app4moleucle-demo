"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[827],{9557:function(e,r,s){s.d(r,{i5:function(){return a},Dp:function(){return g}});var t=s(3827),l=s(4090),n=s(8222);function a(e){let{smiles:r,className:a,overlaySmiles:d}=e,o=(0,l.useRef)(null),c=(0,l.useRef)(null),[i,u]=(0,l.useState)(!1),x=(0,l.useRef)(null);return(0,l.useEffect)(()=>{x.current||s.e(637).then(s.t.bind(s,4259,23)).then(e=>{x.current=e.default||e,u(!0)}).catch(e=>{console.error("Failed to load 3Dmol:",e)})},[]),(0,l.useEffect)(()=>{if(!c.current||!i||!x.current)return;let e=x.current;if(!o.current){let r=e.createViewer(c.current,{backgroundColor:"rgba(0,0,0,0)"});o.current=r}let s=o.current;(async()=>{if(s.clear(),r)try{let e=await n.zG.get3DStructure(r);e&&e.sdf&&s.addModel(e.sdf,"sdf").setStyle({},{stick:{radius:.15,colorscheme:"Jmol"},sphere:{scale:.25}})}catch(e){console.error(e)}if(d)try{let e=await n.zG.get3DStructure(d);e&&e.sdf&&s.addModel(e.sdf,"sdf").setStyle({},{stick:{radius:.15,color:"#00FFFF",opacity:.7},sphere:{scale:.25,color:"#00FFFF",opacity:.7}})}catch(e){console.error(e)}s.zoomTo(),s.render()})()},[r,d,i]),(0,t.jsx)("div",{ref:c,className:"relative w-full h-full min-h-[300px] bg-transparent ".concat(a),children:!i&&(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,t.jsx)("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin"})})})}let d=(0,l.forwardRef)((e,r)=>{let{onChange:s,initialSmiles:n,width:a="100%",height:d="100%"}=e,o=(0,l.useRef)(null),c=(0,l.useRef)(null),[i,u]=(0,l.useState)(!1),[x,m]=(0,l.useState)(!1),f=(0,l.useRef)("");return(0,l.useEffect)(()=>{(()=>{if(window.JSApplet){u(!0);return}let e=document.createElement("script");e.src="https://jsme-editor.github.io/dist/jsme/jsme.nocache.js",e.async=!0,window.jsmeOnLoad=()=>{u(!0)},e.onload=()=>{let e=setInterval(()=>{window.JSApplet&&(clearInterval(e),u(!0))},100);setTimeout(()=>clearInterval(e),1e4)},document.body.appendChild(e)})()},[]),(0,l.useEffect)(()=>{if(i&&o.current&&window.JSApplet&&!c.current)try{let e="jsme-container-".concat(Date.now());o.current.id=e,c.current=new window.JSApplet.JSME(e,"100%","100%",{options:"query,hydrogens,paste,border,removehs,zoom"}),n&&c.current&&setTimeout(()=>{try{c.current.readMolecule(n),f.current=n}catch(e){console.error("Error setting initial SMILES:",e)}},500),c.current.setCallBack("AfterStructureModified",e=>{try{let e=c.current.smiles();e!==f.current&&(f.current=e,null==s||s(e))}catch(e){console.error("Error getting SMILES:",e)}}),m(!0)}catch(e){console.error("Error initializing JSME:",e)}},[i,n,s]),(0,l.useImperativeHandle)(r,()=>({reset:()=>{c.current&&(c.current.reset(),f.current="",null==s||s(""))},undo:()=>{var e;(null===(e=c.current)||void 0===e?void 0:e.undo)&&c.current.undo()},redo:()=>{var e;(null===(e=c.current)||void 0===e?void 0:e.redo)&&c.current.redo()},getSmiles:()=>{var e;return(null===(e=c.current)||void 0===e?void 0:e.smiles())||""},setSmiles:e=>{c.current&&(c.current.readMolecule(e),f.current=e)}}),[s]),(0,t.jsxs)("div",{className:"relative w-full h-full",children:[(0,t.jsx)("div",{ref:o,style:{width:a,height:d,minHeight:"300px"},className:"jsme-editor-container"}),!x&&(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-white/80 backdrop-blur-sm",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 border-3 border-primary border-t-transparent rounded-full animate-spin"}),(0,t.jsx)("span",{className:"text-sm text-muted-foreground font-medium",children:"Loading JSME Editor..."})]})})]})});d.displayName="JSMEEditor";var o=s(575),c=s(4428),i=s(9578),u=s(784),x=s(489),m=s(3416),f=s(4200),b=s(1828),h=s(3348),p=s(6288),j=s(2169);function g(e){let{activeSmiles:r,setActiveSmiles:s,className:n}=e,g=(0,l.useRef)(null),w=(0,l.useCallback)(()=>{r?(navigator.clipboard.writeText(r),p.toast.success("SMILES copied to clipboard")):p.toast.error("No structure to copy")},[r]),N=(0,l.useCallback)(()=>{g.current&&(g.current.reset(),s(""),p.toast.info("Canvas cleared"))},[s]),y=(0,l.useCallback)(()=>{var e;null===(e=g.current)||void 0===e||e.undo()},[]),k=(0,l.useCallback)(()=>{var e;null===(e=g.current)||void 0===e||e.redo()},[]),S=(0,l.useCallback)(e=>{s(e)},[s]);return(0,t.jsxs)("div",{className:(0,j.cn)("flex flex-col lg:flex-row h-full gap-4",n),children:[(0,t.jsxs)("div",{className:"flex-1 flex flex-col bg-card rounded-xl shadow-lg overflow-hidden border border-border/50 min-h-[400px]",children:[(0,t.jsxs)("div",{className:"h-14 border-b border-border bg-background/50 flex justify-between items-center px-4 backdrop-blur-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-lg bg-primary/10 flex items-center justify-center text-primary border border-primary/20 shadow-sm",children:(0,t.jsx)(c.Z,{className:"w-4 h-4"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-xs font-bold text-foreground tracking-wide block",children:"2D DESIGNER"}),(0,t.jsx)("span",{className:"text-[10px] text-muted-foreground",children:"Molecular Blueprint"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 bg-muted/40 p-1.5 rounded-xl border border-border/50 shadow-inner",children:[(0,t.jsx)(v,{icon:(0,t.jsx)(i.Z,{className:"w-4 h-4"}),label:"Undo",onClick:y}),(0,t.jsx)(v,{icon:(0,t.jsx)(u.Z,{className:"w-4 h-4"}),label:"Redo",onClick:k}),(0,t.jsx)("div",{className:"w-px h-4 bg-border mx-1"}),(0,t.jsx)(v,{icon:(0,t.jsx)(x.Z,{className:"w-4 h-4"}),label:"Reset",onClick:N,hoverColor:"hover:text-destructive hover:bg-destructive/10"})]}),(0,t.jsx)("div",{className:"flex items-center gap-1",children:(0,t.jsxs)(o.z,{variant:"outline",size:"sm",onClick:w,className:"h-8 px-3 text-xs font-bold shadow-sm hover:border-primary/50",disabled:!r,children:[(0,t.jsx)(m.Z,{className:"w-3.5 h-3.5 mr-2"})," COPY"]})})]}),(0,t.jsxs)("div",{className:"flex-1 relative bg-white overflow-hidden group min-h-[300px]",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-[radial-gradient(#e5e7eb_1px,transparent_1px)] [background-size:16px_16px] pointer-events-none opacity-50"}),(0,t.jsx)("div",{className:"absolute inset-0",children:(0,t.jsx)(d,{ref:g,onChange:S,initialSmiles:r})})]}),(0,t.jsxs)("div",{className:"h-10 bg-muted/30 border-t border-border flex items-center px-4 justify-between text-xs font-mono text-muted-foreground",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 px-2 py-1 rounded bg-background border border-border/50",children:[(0,t.jsx)("div",{className:(0,j.cn)("w-1.5 h-1.5 rounded-full",r?"bg-green-500 animate-pulse":"bg-yellow-500")}),(0,t.jsx)("span",{className:"font-semibold text-foreground",children:r?"READY":"DRAW STRUCTURE"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 max-w-[250px] opacity-70",children:[(0,t.jsx)(f.Z,{className:"w-3 h-3 flex-shrink-0"}),(0,t.jsx)("span",{className:"truncate",children:r||"NO STRUCTURE"})]})]})]}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col bg-card rounded-xl shadow-lg overflow-hidden border border-border/50 min-h-[400px]",children:[(0,t.jsxs)("div",{className:"h-14 border-b border-border bg-background/50 flex justify-between items-center px-4 backdrop-blur-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-lg bg-blue-500/10 flex items-center justify-center text-blue-500 border border-blue-500/20 shadow-sm",children:(0,t.jsx)(b.Z,{className:"w-4 h-4"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-xs font-bold text-foreground tracking-wide block",children:"3D PREVIEW"}),(0,t.jsx)("span",{className:"text-[10px] text-muted-foreground",children:"Real-time Visualization"})]})]}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsxs)("div",{className:"text-xs text-muted-foreground bg-muted/50 px-2 py-1 rounded-md border border-border/50",children:[(0,t.jsx)(h.Z,{className:"w-3 h-3 inline mr-1"}),"Drag to rotate"]})})]}),(0,t.jsx)("div",{className:"flex-1 relative bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800 min-h-[300px]",children:r?(0,t.jsx)(a,{smiles:r,className:"w-full h-full"}):(0,t.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-muted-foreground",children:[(0,t.jsx)("div",{className:"w-20 h-20 rounded-2xl bg-muted/50 flex items-center justify-center mb-4 border border-border/50",children:(0,t.jsx)(b.Z,{className:"w-10 h-10 text-muted-foreground/50"})}),(0,t.jsx)("p",{className:"text-sm font-medium",children:"Draw a molecule to see 3D preview"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground/70 mt-1",children:"Use the 2D editor on the left"})]})}),(0,t.jsxs)("div",{className:"h-10 bg-muted/30 border-t border-border flex items-center px-4 justify-between text-xs",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Powered by"}),(0,t.jsx)("span",{className:"font-bold text-blue-500",children:"3Dmol.js"})]}),r&&(0,t.jsx)("div",{className:"text-muted-foreground font-mono truncate max-w-[200px]",children:r})]})]})]})}function v(e){let{icon:r,label:s,onClick:l,hoverColor:n}=e;return(0,t.jsx)(o.z,{variant:"ghost",size:"icon",onClick:l,className:(0,j.cn)("w-8 h-8 rounded-lg text-muted-foreground transition-all",n||"hover:text-foreground hover:bg-background hover:shadow-sm"),title:s,children:r})}}}]);