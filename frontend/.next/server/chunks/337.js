"use strict";exports.id=337,exports.ids=[337],exports.modules={7337:(e,r,s)=>{s.d(r,{i5:()=>n,Dp:()=>j});var t=s(5344),l=s(3729),a=s(6548);function n({smiles:e,className:r,overlaySmiles:s}){let n=(0,l.useRef)(null),d=(0,l.useRef)(null),[o,c]=(0,l.useState)(!1),i=(0,l.useRef)(null);return(0,l.useEffect)(()=>{},[]),(0,l.useEffect)(()=>{if(!d.current||!o||!i.current)return;let r=i.current;if(!n.current){let e=r.createViewer(d.current,{backgroundColor:"rgba(0,0,0,0)"});n.current=e}let t=n.current;(async()=>{if(t.clear(),e)try{let r=await a.zG.get3DStructure(e);r&&r.sdf&&t.addModel(r.sdf,"sdf").setStyle({},{stick:{radius:.15,colorscheme:"Jmol"},sphere:{scale:.25}})}catch(e){console.error(e)}if(s)try{let e=await a.zG.get3DStructure(s);e&&e.sdf&&t.addModel(e.sdf,"sdf").setStyle({},{stick:{radius:.15,color:"#00FFFF",opacity:.7},sphere:{scale:.25,color:"#00FFFF",opacity:.7}})}catch(e){console.error(e)}t.zoomTo(),t.render()})()},[e,s,o]),t.jsx("div",{ref:d,className:`relative w-full h-full min-h-[300px] bg-transparent ${r}`,children:!o&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin"})})})}let d=(0,l.forwardRef)(({onChange:e,initialSmiles:r,width:s="100%",height:a="100%"},n)=>{let d=(0,l.useRef)(null),o=(0,l.useRef)(null),[c,i]=(0,l.useState)(!1),[u,x]=(0,l.useState)(!1),m=(0,l.useRef)("");return(0,l.useEffect)(()=>{},[]),(0,l.useEffect)(()=>{if(c&&d.current&&window.JSApplet&&!o.current)try{let s=`jsme-container-${Date.now()}`;d.current.id=s,o.current=new window.JSApplet.JSME(s,"100%","100%",{options:"query,hydrogens,paste,border,removehs,zoom"}),r&&o.current&&setTimeout(()=>{try{o.current.readMolecule(r),m.current=r}catch(e){console.error("Error setting initial SMILES:",e)}},500),o.current.setCallBack("AfterStructureModified",r=>{try{let r=o.current.smiles();r!==m.current&&(m.current=r,e?.(r))}catch(e){console.error("Error getting SMILES:",e)}}),x(!0)}catch(e){console.error("Error initializing JSME:",e)}},[c,r,e]),(0,l.useImperativeHandle)(n,()=>({reset:()=>{o.current&&(o.current.reset(),m.current="",e?.(""))},undo:()=>{o.current?.undo&&o.current.undo()},redo:()=>{o.current?.redo&&o.current.redo()},getSmiles:()=>o.current?.smiles()||"",setSmiles:e=>{o.current&&(o.current.readMolecule(e),m.current=e)}}),[e]),(0,t.jsxs)("div",{className:"relative w-full h-full",children:[t.jsx("div",{ref:d,style:{width:s,height:a,minHeight:"300px"},className:"jsme-editor-container"}),!u&&t.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/80 backdrop-blur-sm",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 border-3 border-primary border-t-transparent rounded-full animate-spin"}),t.jsx("span",{className:"text-sm text-muted-foreground font-medium",children:"Loading JSME Editor..."})]})})]})});d.displayName="JSMEEditor";var o=s(5094),c=s(6458),i=s(4216),u=s(3149),x=s(8271),m=s(1960),f=s(1104),b=s(4292),h=s(4989),p=s(4755),g=s(1453);function j({activeSmiles:e,setActiveSmiles:r,className:s}){let a=(0,l.useRef)(null),j=(0,l.useCallback)(()=>{e?(navigator.clipboard.writeText(e),p.toast.success("SMILES copied to clipboard")):p.toast.error("No structure to copy")},[e]),N=(0,l.useCallback)(()=>{a.current&&(a.current.reset(),r(""),p.toast.info("Canvas cleared"))},[r]),w=(0,l.useCallback)(()=>{a.current?.undo()},[]),y=(0,l.useCallback)(()=>{a.current?.redo()},[]),k=(0,l.useCallback)(e=>{r(e)},[r]);return(0,t.jsxs)("div",{className:(0,g.cn)("flex flex-col lg:flex-row h-full gap-4",s),children:[(0,t.jsxs)("div",{className:"flex-1 flex flex-col bg-card rounded-xl shadow-lg overflow-hidden border border-border/50 min-h-[400px]",children:[(0,t.jsxs)("div",{className:"h-14 border-b border-border bg-background/50 flex justify-between items-center px-4 backdrop-blur-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-8 h-8 rounded-lg bg-primary/10 flex items-center justify-center text-primary border border-primary/20 shadow-sm",children:t.jsx(c.Z,{className:"w-4 h-4"})}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-xs font-bold text-foreground tracking-wide block",children:"2D DESIGNER"}),t.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Molecular Blueprint"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 bg-muted/40 p-1.5 rounded-xl border border-border/50 shadow-inner",children:[t.jsx(v,{icon:t.jsx(i.Z,{className:"w-4 h-4"}),label:"Undo",onClick:w}),t.jsx(v,{icon:t.jsx(u.Z,{className:"w-4 h-4"}),label:"Redo",onClick:y}),t.jsx("div",{className:"w-px h-4 bg-border mx-1"}),t.jsx(v,{icon:t.jsx(x.Z,{className:"w-4 h-4"}),label:"Reset",onClick:N,hoverColor:"hover:text-destructive hover:bg-destructive/10"})]}),t.jsx("div",{className:"flex items-center gap-1",children:(0,t.jsxs)(o.z,{variant:"outline",size:"sm",onClick:j,className:"h-8 px-3 text-xs font-bold shadow-sm hover:border-primary/50",disabled:!e,children:[t.jsx(m.Z,{className:"w-3.5 h-3.5 mr-2"})," COPY"]})})]}),(0,t.jsxs)("div",{className:"flex-1 relative bg-white overflow-hidden group min-h-[300px]",children:[t.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(#e5e7eb_1px,transparent_1px)] [background-size:16px_16px] pointer-events-none opacity-50"}),t.jsx("div",{className:"absolute inset-0",children:t.jsx(d,{ref:a,onChange:k,initialSmiles:e})})]}),(0,t.jsxs)("div",{className:"h-10 bg-muted/30 border-t border-border flex items-center px-4 justify-between text-xs font-mono text-muted-foreground",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 px-2 py-1 rounded bg-background border border-border/50",children:[t.jsx("div",{className:(0,g.cn)("w-1.5 h-1.5 rounded-full",e?"bg-green-500 animate-pulse":"bg-yellow-500")}),t.jsx("span",{className:"font-semibold text-foreground",children:e?"READY":"DRAW STRUCTURE"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 max-w-[250px] opacity-70",children:[t.jsx(f.Z,{className:"w-3 h-3 flex-shrink-0"}),t.jsx("span",{className:"truncate",children:e||"NO STRUCTURE"})]})]})]}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col bg-card rounded-xl shadow-lg overflow-hidden border border-border/50 min-h-[400px]",children:[(0,t.jsxs)("div",{className:"h-14 border-b border-border bg-background/50 flex justify-between items-center px-4 backdrop-blur-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-500/10 flex items-center justify-center text-blue-500 border border-blue-500/20 shadow-sm",children:t.jsx(b.Z,{className:"w-4 h-4"})}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-xs font-bold text-foreground tracking-wide block",children:"3D PREVIEW"}),t.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Real-time Visualization"})]})]}),t.jsx("div",{className:"flex items-center gap-2",children:(0,t.jsxs)("div",{className:"text-xs text-muted-foreground bg-muted/50 px-2 py-1 rounded-md border border-border/50",children:[t.jsx(h.Z,{className:"w-3 h-3 inline mr-1"}),"Drag to rotate"]})})]}),t.jsx("div",{className:"flex-1 relative bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800 min-h-[300px]",children:e?t.jsx(n,{smiles:e,className:"w-full h-full"}):(0,t.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-muted-foreground",children:[t.jsx("div",{className:"w-20 h-20 rounded-2xl bg-muted/50 flex items-center justify-center mb-4 border border-border/50",children:t.jsx(b.Z,{className:"w-10 h-10 text-muted-foreground/50"})}),t.jsx("p",{className:"text-sm font-medium",children:"Draw a molecule to see 3D preview"}),t.jsx("p",{className:"text-xs text-muted-foreground/70 mt-1",children:"Use the 2D editor on the left"})]})}),(0,t.jsxs)("div",{className:"h-10 bg-muted/30 border-t border-border flex items-center px-4 justify-between text-xs",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-muted-foreground",children:"Powered by"}),t.jsx("span",{className:"font-bold text-blue-500",children:"3Dmol.js"})]}),e&&t.jsx("div",{className:"text-muted-foreground font-mono truncate max-w-[200px]",children:e})]})]})]})}function v({icon:e,label:r,onClick:s,hoverColor:l}){return t.jsx(o.z,{variant:"ghost",size:"icon",onClick:s,className:(0,g.cn)("w-8 h-8 rounded-lg text-muted-foreground transition-all",l||"hover:text-foreground hover:bg-background hover:shadow-sm"),title:r,children:e})}}};